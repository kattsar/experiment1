---
title: "REPSWITCH1_Clean"
author: "Katerina Tsaroucha"
date: "2023-07-28"
output: html_document
---

```{r}
library(tidyverse)
library(readr)
```

```{r}
pilot <- read.csv("D:\\GitHub\\experiment1\\data\\010100_REPSWITCH1_pilot.csv", header = TRUE, sep = ";") %>% 
  rename(image = ο.Ώimage,
         keyResp_keys = keyResp.keys,
         keyResp_rt = keyResp.rt) %>% 
  select(-c(12:46, 50, 53:58, 61:65, 71:72)) %>% 
  filter(!row_number() %in% c(1, 2, 387)) %>% 
  relocate(order, psychopy_order) %>% #move columns to the front
  relocate(keyResp_keys, .after = respModal) %>% 
  relocate(keyResp_rt, .after = keyResp_keys) %>% 
  relocate(subjResponse, .after = keyResp_rt) %>% 
  mutate_if(is.character, as.factor) %>% 
  mutate_if(is.logical, as.factor)
  
```

```{r}
speak <- filter(pilot, respModal == "speak")

write_csv(speak, "D:\\GitHub\\experiment1\\data\\speak_pilot00.csv")
```

```{r}
type <- filter(pilot, respModal == "type")

write_csv(type, "D:\\GitHub\\experiment1\\data\\type_pilot00.csv")
```

```{r}
type <- read.csv("D:\\GitHub\\experiment1\\data\\type_pilot00.csv", header = TRUE, sep = ";"#, fileEncoding = "UTF-8"
                 ) %>% 
  mutate(correct = "", .after = keyResp_rt) %>% 
  mutate(incorrect_correct = "", .after = correct) %>% 
  mutate(across(c("keyResp_rt"), substr, 2, nchar(keyResp_rt))) %>% #remove 1st char([) in the beginning of each string in the column
  mutate(str_sub(keyResp_rt, start = 1, end = -1)) %>% #remove last char(]) in the beginning of each string in the column
  separate(keyResp_rt, c("key1", "key2", "key3", "key4", "key5", "key6", "key7", "key8", "key9", "key10", "key11", "key12", "key13", "key14", "key15"), 
           ", ", extra = "merge", fill = "right") #https://tidyr.tidyverse.org/reference/separate.html
        

write_csv(type, "D:\\GitHub\\experiment1\\data\\type_pilot00_clean.csv")
```



